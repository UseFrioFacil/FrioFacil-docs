"use strict";(self.webpackChunkfriofacil_docs=self.webpackChunkfriofacil_docs||[]).push([[103],{5333:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tecnico/backend/overview","title":"Backend API - Vis\xe3o Geral","description":"A API Backend do FrioF\xe1cil \xe9 constru\xedda em ASP.NET Core 8 e serve como o n\xfacleo do sistema, gerenciando autentica\xe7\xe3o, dados de usu\xe1rios, empresas e toda a l\xf3gica de neg\xf3cio principal.","source":"@site/docs/tecnico/backend/overview.md","sourceDirName":"tecnico/backend","slug":"/tecnico/backend/overview","permalink":"/FrioFacil-docs/tecnico/backend/overview","draft":false,"unlisted":false,"editUrl":"https://github.com/UseFrioFacil/FrioFacil-docs/tree/main/docs/tecnico/backend/overview.md","tags":[],"version":"current","lastUpdatedBy":"Ryan","lastUpdatedAt":1754208456000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Vis\xe3o Geral da Arquitetura","permalink":"/FrioFacil-docs/tecnico/overview"},"next":{"title":"Backend API - Vis\xe3o Geral","permalink":"/FrioFacil-docs/tecnico/backend/overview"}}');var o=n(4848),s=n(8453);const c={},a="Backend API - Vis\xe3o Geral",d={},l=[{value:"\ud83d\ude80 Caracter\xedsticas Principais",id:"-caracter\xedsticas-principais",level:2},{value:"\ud83c\udfd7\ufe0f Arquitetura",id:"\ufe0f-arquitetura",level:2},{value:"\ud83c\udf10 Informa\xe7\xf5es de Deployment",id:"-informa\xe7\xf5es-de-deployment",level:2},{value:"\ud83d\udccb Principais Endpoints",id:"-principais-endpoints",level:2},{value:"\ud83d\udd10 Autentica\xe7\xe3o",id:"-autentica\xe7\xe3o",level:3},{value:"\ud83d\udc64 Usu\xe1rios",id:"-usu\xe1rios",level:3},{value:"\ud83c\udfe2 Empresas",id:"-empresas",level:3},{value:"\ud83c\udfe0 Dashboard",id:"-dashboard",level:3},{value:"\ud83d\udce8 Convites",id:"-convites",level:3},{value:"\ud83e\ude7a Monitoramento",id:"-monitoramento",level:3},{value:"\ud83d\udd27 Configura\xe7\xe3o",id:"-configura\xe7\xe3o",level:2},{value:"appsettings.json",id:"appsettingsjson",level:3},{value:"CORS Policy",id:"cors-policy",level:3},{value:"Forwarded Headers",id:"forwarded-headers",level:3},{value:"\ud83d\udc33 Docker Configuration",id:"-docker-configuration",level:2},{value:"Dockerfile",id:"dockerfile",level:3},{value:"docker-compose (Dokploy)",id:"docker-compose-dokploy",level:3},{value:"\ud83d\udd0d Health Check Response",id:"-health-check-response",level:2},{value:"\ud83d\udcca Estrutura do Projeto",id:"-estrutura-do-projeto",level:2},{value:"\ud83d\udd17 Recursos Relacionados",id:"-recursos-relacionados",level:2}];function t(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"backend-api---vis\xe3o-geral",children:"Backend API - Vis\xe3o Geral"})}),"\n",(0,o.jsxs)(r.p,{children:["A API Backend do FrioF\xe1cil \xe9 constru\xedda em ",(0,o.jsx)(r.strong,{children:"ASP.NET Core 8"})," e serve como o n\xfacleo do sistema, gerenciando autentica\xe7\xe3o, dados de usu\xe1rios, empresas e toda a l\xf3gica de neg\xf3cio principal."]}),"\n",(0,o.jsx)(r.h2,{id:"-caracter\xedsticas-principais",children:"\ud83d\ude80 Caracter\xedsticas Principais"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Framework"}),": ASP.NET Core 8"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Linguagem"}),": C#"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Banco de Dados"}),": PostgreSQL"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Autentica\xe7\xe3o"}),": JWT Bearer Tokens"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"CORS"}),": Configurado para produ\xe7\xe3o"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Health Checks"}),": Endpoint de monitoramento"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Dockerizado"}),": Pronto para produ\xe7\xe3o"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"\ufe0f-arquitetura",children:"\ud83c\udfd7\ufe0f Arquitetura"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-mermaid",children:'graph TB\r\n    subgraph "Frontend"\r\n        FE[React App<br/>usefriofacil.com.br]\r\n    end\r\n    \r\n    subgraph "Backend API"\r\n        CTRL[Controllers]\r\n        AUTH[Authentication]\r\n        BLL[Business Logic]\r\n        DAL[Data Access Layer]\r\n    end\r\n    \r\n    subgraph "Database"\r\n        DB[(PostgreSQL<br/>136.248.104.23:5861)]\r\n    end\r\n    \r\n    FE --\x3e|HTTPS/JWT| CTRL\r\n    CTRL --\x3e AUTH\r\n    CTRL --\x3e BLL\r\n    BLL --\x3e DAL\r\n    DAL --\x3e DB\n'})}),"\n",(0,o.jsx)(r.h2,{id:"-informa\xe7\xf5es-de-deployment",children:"\ud83c\udf10 Informa\xe7\xf5es de Deployment"}),"\n",(0,o.jsxs)(r.table,{children:[(0,o.jsx)(r.thead,{children:(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.th,{children:"Configura\xe7\xe3o"}),(0,o.jsx)(r.th,{children:"Valor"})]})}),(0,o.jsxs)(r.tbody,{children:[(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Dom\xednio"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"backend.usefriofacil.com.br"})})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Porta Interna"})}),(0,o.jsx)(r.td,{children:"65012"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Protocolo"})}),(0,o.jsx)(r.td,{children:"HTTPS (Produ\xe7\xe3o)"})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Health Check"})}),(0,o.jsx)(r.td,{children:(0,o.jsx)(r.code,{children:"/api/friofacil/health"})})]}),(0,o.jsxs)(r.tr,{children:[(0,o.jsx)(r.td,{children:(0,o.jsx)(r.strong,{children:"Ambiente"})}),(0,o.jsx)(r.td,{children:"Production"})]})]})]}),"\n",(0,o.jsx)(r.h2,{id:"-principais-endpoints",children:"\ud83d\udccb Principais Endpoints"}),"\n",(0,o.jsx)(r.h3,{id:"-autentica\xe7\xe3o",children:"\ud83d\udd10 Autentica\xe7\xe3o"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"POST /api/friofacil/login"})," - Login de usu\xe1rio"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"POST /api/friofacil/register"})," - Registro de usu\xe1rio"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"-usu\xe1rios",children:"\ud83d\udc64 Usu\xe1rios"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"GET /api/friofacil/myaccount"})," - Dados do usu\xe1rio logado"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"DELETE /api/friofacil/userdelete"})," - Exclus\xe3o de conta"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"-empresas",children:"\ud83c\udfe2 Empresas"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"POST /api/friofacil/createtempcompany"})," - Criar empresa tempor\xe1ria"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"DELETE /api/friofacil/companydelete/{id}"})," - Excluir empresa"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"-dashboard",children:"\ud83c\udfe0 Dashboard"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"GET /api/friofacil/home"})," - Dados do dashboard"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"-convites",children:"\ud83d\udce8 Convites"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"PATCH /api/friofacil/respondinvite"})," - Responder convite"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"-monitoramento",children:"\ud83e\ude7a Monitoramento"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"GET /api/friofacil/health"})," - Health check"]}),"\n"]}),"\n",(0,o.jsx)(r.h2,{id:"-configura\xe7\xe3o",children:"\ud83d\udd27 Configura\xe7\xe3o"}),"\n",(0,o.jsx)(r.h3,{id:"appsettingsjson",children:"appsettings.json"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-json",children:'{\r\n  "AllowedHosts": "backend.usefriofacil.com.br;usefriofacil.com.br;*.usefriofacil.com.br;localhost;*",\r\n  "ConnectionStrings": {\r\n    "DefaultConnection": "Host=136.248.104.23;Port=5861;Database=FrioFacil;Username=FrioFacilUserData;Password=..."\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(r.h3,{id:"cors-policy",children:"CORS Policy"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-csharp",children:'services.AddCors(opcoes =>\r\n{\r\n    opcoes.AddPolicy("Permission", policy =>\r\n    {\r\n        policy.WithOrigins(\r\n                "https://usefriofacil.com.br",\r\n                "http://usefriofacil.com.br",\r\n                "https://frontend.usefriofacil.com.br",\r\n                "http://frontend.usefriofacil.com.br"\r\n              )\r\n              .AllowAnyMethod()\r\n              .AllowAnyHeader()\r\n              .AllowCredentials();\r\n    });\r\n});\n'})}),"\n",(0,o.jsx)(r.h3,{id:"forwarded-headers",children:"Forwarded Headers"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-csharp",children:"builder.Services.Configure<ForwardedHeadersOptions>(options =>\r\n{\r\n    options.ForwardedHeaders = ForwardedHeaders.XForwardedFor | ForwardedHeaders.XForwardedProto;\r\n    options.KnownNetworks.Clear();\r\n    options.KnownProxies.Clear();\r\n});\n"})}),"\n",(0,o.jsx)(r.h2,{id:"-docker-configuration",children:"\ud83d\udc33 Docker Configuration"}),"\n",(0,o.jsx)(r.h3,{id:"dockerfile",children:"Dockerfile"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-dockerfile",children:'# Production Dockerfile for FrioFacil Backend API\r\nFROM mcr.microsoft.com/dotnet/aspnet:8.0 AS base\r\nWORKDIR /app\r\n\r\n# Install curl for health checks\r\nRUN apt-get update && apt-get install -y curl\r\n\r\n# Create non-root user\r\nRUN adduser --disabled-password --home /app --gecos \'\' dotnetuser && chown -R dotnetuser /app\r\nUSER dotnetuser\r\n\r\nFROM mcr.microsoft.com/dotnet/sdk:8.0 AS build\r\nWORKDIR /src\r\nCOPY ["FrioFacilBackend.Api/FrioFacilBackend.Api.csproj", "FrioFacilBackend.Api/"]\r\nRUN dotnet restore "FrioFacilBackend.Api/FrioFacilBackend.Api.csproj"\r\nCOPY . .\r\nWORKDIR "/src/FrioFacilBackend.Api"\r\nRUN dotnet build "FrioFacilBackend.Api.csproj" -c Release -o /app/build\r\n\r\nFROM build AS publish\r\nRUN dotnet publish "FrioFacilBackend.Api.csproj" -c Release -o /app/publish\r\n\r\nFROM base AS final\r\nWORKDIR /app\r\nCOPY --from=publish /app/publish .\r\n\r\n# Configure ASP.NET Core for production\r\nENV ASPNETCORE_ENVIRONMENT=Production\r\nENV ASPNETCORE_URLS=http://+:65012\r\nENV ASPNETCORE_HTTP_PORTS=65012\r\n\r\nEXPOSE 65012\r\n\r\nENTRYPOINT ["dotnet", "FrioFacilBackend.Api.dll"]\n'})}),"\n",(0,o.jsx)(r.h3,{id:"docker-compose-dokploy",children:"docker-compose (Dokploy)"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-yaml",children:'backend:\r\n  build: \r\n    context: ./FrioFacil-Backend\r\n    dockerfile: Dockerfile\r\n  ports:\r\n    - "65012:65012"\r\n  environment:\r\n    - ASPNETCORE_ENVIRONMENT=Production\r\n    - ASPNETCORE_URLS=http://+:65012\r\n    - ASPNETCORE_FORWARDEDHEADERS_ENABLED=true\r\n  healthcheck:\r\n    test: ["CMD", "curl", "-f", "http://localhost:65012/api/friofacil/health"]\r\n    interval: 30s\r\n    timeout: 10s\r\n    retries: 3\r\n    start_period: 40s\r\n  networks:\r\n    - friofacil-network\r\n  restart: unless-stopped\n'})}),"\n",(0,o.jsx)(r.h2,{id:"-health-check-response",children:"\ud83d\udd0d Health Check Response"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-json",children:'{\r\n  "status": "healthy",\r\n  "timestamp": "2025-01-08T10:30:00.000Z",\r\n  "service": "FrioFacil Backend API"\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"-estrutura-do-projeto",children:"\ud83d\udcca Estrutura do Projeto"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{children:"FrioFacil-Backend/\r\n\u251c\u2500\u2500 FrioFacilBackend.Api/\r\n\u2502   \u251c\u2500\u2500 Controllers/\r\n\u2502   \u2502   \u2514\u2500\u2500 HomeController.cs      # Endpoints principais\r\n\u2502   \u251c\u2500\u2500 Models/                    # Modelos de dados\r\n\u2502   \u251c\u2500\u2500 Services/                  # L\xf3gica de neg\xf3cio\r\n\u2502   \u251c\u2500\u2500 Data/                      # Contexto do banco\r\n\u2502   \u251c\u2500\u2500 Program.cs                 # Configura\xe7\xe3o da aplica\xe7\xe3o\r\n\u2502   \u251c\u2500\u2500 appsettings.json           # Configura\xe7\xf5es\r\n\u2502   \u2514\u2500\u2500 FrioFacilBackend.Api.csproj\r\n\u251c\u2500\u2500 Dockerfile                     # Container de produ\xe7\xe3o\r\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,o.jsx)(r.h2,{id:"-recursos-relacionados",children:"\ud83d\udd17 Recursos Relacionados"}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"/FrioFacil-docs/tecnico/overview",children:"\ud83c\udfd7\ufe0f Vis\xe3o Geral da Arquitetura"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"/FrioFacil-docs/tecnico/frontend/overview",children:"\ud83c\udfa8 Frontend"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"/FrioFacil-docs/tecnico/payment-api/overview",children:"\ud83d\udcb3 Payment API"})}),"\n",(0,o.jsx)(r.li,{children:(0,o.jsx)(r.a,{href:"https://github.com/UseFrioFacil/FrioFacil-Backend",children:"\ud83d\udd27 Backend GitHub Repository"})}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>c,x:()=>a});var i=n(6540);const o={},s=i.createContext(o);function c(e){const r=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function a(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:c(e.components),i.createElement(s.Provider,{value:r},e.children)}}}]);